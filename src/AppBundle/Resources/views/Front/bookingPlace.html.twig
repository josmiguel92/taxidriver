{% extends 'AppBundle:Front:baseBooking.html.twig' %}


{% set title = "I'm going to "%}
{% if locale=='es' %}
    {% set title = "Voy a ir a " %}
{% endif %}

{% set title = title~place.getNameLocale %}

{% set featureImage =  place.getFullImageWebPath %}
{% set formTitle = place.getNameLocale %}

{% block destination %}

<!--- Parallax -->
    <div class="booking-place context-dark offset-top-0" style="margin-top: -8px;">
        <!-- RD Parallax-->
        <div data-on="false" data-md-on="true" class="rd-parallax">
            <div data-speed="0.25" data-type="media" data-url="{{ asset(place.getFullImageWebPath) }}" class="rd-parallax-layer"></div>
            <div data-speed="0" data-type="html" data-md-fade="false" class="rd-parallax-layer">
                <div class="shell section-75 section-md-top-103 section-md-bottom-110">
                    <div class="range range-xs-center">
                        <div class="cell-sm-10">

                            <div class="offset-top-60 offset-md-top-30">

                                <h2 class=" h1 text-center text-spacing-0 text-uppercase" style="border-radius: 5px;">
                                    {{ place.getNameLocale }}
                                </h2>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block addTour %}
    {% if place.isTour %}
        <div class="offset-top-15 cell-sm-6 cell-md-8 col-md-offset-2 well-row-flex" style="margin-bottom: 25px;">
            <label class="custom-label text-gray-dark">
                {% trans %}The selected place, admits a <a href="#">tour</a>. Do you want to activate it?{% endtrans %}
            </label>
            <div style="max-width: 200px; width: 350%;" class="form-group">
                <input data-toggle="toggle" type="checkbox" id="activeTour" name="">
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block javascript %}
{{ parent() }}

    <script>

        function wrapperPrice(price)
        {
            if (typeof(price)=="number")
                return '<i class=\'fa fa-dollar color-sky\'></i> '+price+' USD';
            else
                return "{% trans %}We need to negotiate {% endtrans %} <span class=\"text-extra-small\">*</span>";
            return price;
        }

        function updatePrice()
        {
            var price = {{ place.getPrice }};
            var numberPeople = $('#{{ booking_form.numpeople.vars.id }}')[0].value;


            {#todo: we shoul use a better identificator of the toggle botton not the element in [1]#}

            if ($('.toggle')[1].classList.contains('off') && numberPeople <= 5)
                priceContent = wrapperPrice(price);

            if (!$('.toggle')[1].classList.contains('off') && numberPeople > 2 && numberPeople <= 5)
                priceContent = wrapperPrice(price + (numberPeople-2)*10);

            if (numberPeople > 5)
                priceContent = wrapperPrice("");

            $("#labelPrice")[0].innerHTML = priceContent;
        }


        $("#document").ready(function (){
            updatePrice();

            $("#activeTour").change(function() {
              updatePrice();
            });

            $("#{{ booking_form.numpeople.vars.id }}").change(function() {
              updatePrice();
            });

        });





    </script>

{% endblock %}